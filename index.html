<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Operation Valentine‚Äôs Heist</title>

<style>
:root {
  --night: #070b1a;
  --dawn: #ffb347;
  --gold: #ffd27d;
  --text: #f5f5f5;
}

body {
  margin: 0;
  font-family: 'Georgia', serif;
  background: linear-gradient(var(--night), black);
  color: var(--text);
  text-align: center;
  overflow-x: hidden;
}

.section {
  display: none;
  padding: 40px 20px;
  min-height: 100vh;
}

.active { display: block; }

button {
  padding: 12px 30px;
  font-size: 16px;
  background: white;
  border: none;
  cursor: pointer;
  margin: 10px;
}

input {
  padding: 12px;
  font-size: 16px;
  width: 260px;
}

video {
  width: 90%;
  max-width: 600px;
  border-radius: 12px;
  margin: 20px 0;
}

.lock {
  font-size: 50px;
}

.node {
  display: inline-block;
  width: 120px;
  height: 120px;
  margin: 20px;
  border-radius: 50%;
  background: rgba(255,255,255,0.08);
  line-height: 120px;
  cursor: pointer;
}

.node.locked {
  background: rgba(255,255,255,0.03);
  cursor: not-allowed;
}

.poem {
  white-space: pre-line;
  max-width: 700px;
  margin: auto;
}

.skyline {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 200px;
  background: linear-gradient(to top, black, transparent);
}
</style>
</head>

<body>

<!-- START -->
<div id="start" class="section active">
  <h1>üïµüèΩ‚Äç‚ôÇÔ∏è Operation Valentine‚Äôs Heist</h1>
  <button onclick="show('intro')">PLAY</button>
  <button onclick="show('credits')">CREDITS</button>
</div>

<div id="credits" class="section">
  <p>Designed with love for Nana.</p>
  <button onclick="show('start')">Back</button>
</div>

<!-- INTRO -->
<div id="intro" class="section">
  <video src="videos/intro.mp4" id="introVideo"></video>
  <br>
  <button id="skipBtn" style="display:none" onclick="show('map')">Skip</button>
</div>

<!-- MAP -->
<div id="map" class="section">
  <h2>Select a Level</h2>
  <div id="nodes"></div>
</div>

<!-- LEVEL -->
<div id="level" class="section">
  <video id="levelVideo"></video>
  <p id="clue"></p>
  <input id="answer">
  <br>
  <button onclick="submit()">Submit</button>
</div>

<!-- FINAL LOCK -->
<div id="finalLock" class="section">
  <h2>Final Lock</h2>
  <input id="finalCode" placeholder="Enter code">
  <br>
  <button onclick="unlockFinal()">Unlock</button>
</div>

<!-- FINAL POEM -->
<div id="finalPoem" class="section">
  <div class="poem">
Before we ever named this,
there was a <input id="p1"> ‚Äî
quiet, unannounced.

Somewhere along the way,
we started <input id="p2">,
slowly, honestly.

Even in the silence,
we were still <input id="p3">.

And now,
we are <input id="p4"> ‚Äî
together.
  </div>
  <br>
  <button onclick="finishPoem()">Complete</button>
</div>

<!-- FINAL -->
<div id="final" class="section">
  <video src="videos/final.mp4"></video>
  <h2>Will you be my Valentine?</h2>
  <button onclick="celebrate()">Yes</button>
  <button onclick="celebrate()">Yes</button>
</div>

<div class="skyline"></div>

<script>
let progress = JSON.parse(localStorage.getItem("progress")) || 0;
let words = ["BEGINNING","FALLING","WAITING","CHOOSING"];

function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

setTimeout(() => document.getElementById("skipBtn").style.display = "inline", 5000);

function loadMap() {
  const nodes = document.getElementById("nodes");
  nodes.innerHTML = "";
  for (let i = 0; i < 4; i++) {
    let n = document.createElement("div");
    n.className = "node" + (i <= progress ? "" : " locked");
    n.innerHTML = i <= progress ? "Level " + (i+1) : "üîí";
    if (i <= progress) n.onclick = () => startLevel(i);
    nodes.appendChild(n);
  }
}

function startLevel(i) {
  current = i;
  show("level");
  document.getElementById("levelVideo").src = `videos/day${i+1}.mp4`;
  document.getElementById("clue").innerText = [
    "Where stories begin before memory.",
    "What pulls hearts closer.",
    "What love does in silence.",
    "What we do when it matters."
  ][i];
}

function submit() {
  progress++;
  localStorage.setItem("progress", JSON.stringify(progress));
  show("map");
  loadMap();
}

function unlockFinal() {
  if (finalCode.value === "NANA&NOLAWI") show("finalPoem");
}

function finishPoem() {
  if (
    p1.value === "BEGINNING" &&
    p2.value === "FALLING" &&
    p3.value === "WAITING" &&
    p4.value === "CHOOSING"
  ) show("final");
}

function celebrate() {
  alert("üéâ");
}

loadMap();
</script>

</body>
</html>
